<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="jquery.canvasjs.min.js"></script>
    <script type="text/javascript" src="jittertrap.js"></script>
    <link href="bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h3 class="text-muted">JitterTrap</h3>
      </div>
      <hr/>
      <div>
        <em>Impairment Parameters:</em>
        <p>
        Interface: <select id="dev_select"></select> &nbsp;
        Delay: <input type="text" size="6" id="delay"/> &nbsp;
        Delay variation: <input type="text" size="6" id="jitter"/> &nbsp;
        Loss: <input type="text" size="6" id="loss"/>
        <br/><br/>
        <button id="set_netem_button">Update</button> &nbsp;
        Status: <span id="netem_status"></span>
      </div>
      <hr/>
      <div id="chartOpts">
        <em>Measurement Parameters:</em>
        <p>
	Sampling period:
	<input type="text" size="4" id="sample_period"/> &nbsp;
        Chart Series:
        <select id="chopts_series">
          <option value="rxRate" selected>Rx Bitrate</option>
          <option value="txRate">Tx Bitrate</option>
          <option value="txDelta">Tx Bytes Delta</option>
          <option value="rxDelta">Rx Bytes Delta</option>
          <option value="rxPacketRate">Rx Packet Rate</option>
          <option value="txPacketRate">Tx Packet Rate</option>
          <option value="rxPacketDelta">Rx Packet Delta</option>
          <option value="txPacketDelta">Tx Packet Delta</option>
        </select>
        <button id="chopts_stop_start"> Stop/Start</button>
        <button id="trigger_toggle">Triggers</button>
        <button id="more_chopts_toggle">More chart options</button>
        <br/>
        <br/>
        <span id="trigger_chopts" style="display:none">
          Trigger Stop when:<br/>
          <input type="checkbox" value="max_rx_throughput" id="trigger_enable_max_rx_throughput">Exceeds Max RX Throughput: &nbsp;
          <input type="text" id="trigger_val_max_rx_throughput"/> Mbps<br/>
          <input type="checkbox" value="max_tx_throughput" id="trigger_enable_max_tx_throughput">Exceeds Max TX Throughput: &nbsp;
          <input type="text" id="trigger_val_max_tx_throughput"/> Mbps<br/>
          <input type="checkbox" value="min_rx_throughput" id="trigger_enable_min_rx_throughput">Below Min RX Throughput: &nbsp;
          <input type="text" id="trigger_val_max_rx_throughput"/> Mbps<br/>
          <input type="checkbox" value="max_tx_throughput" id="trigger_enable_max_tx_throughput">Below Min TX Throughput: &nbsp;
          <input type="text" id="trigger_val_max_tx_throughput"/> Mbps<br/>
          <input type="checkbox" value="silence" id="trigger_enable_rx_silence">RX Silence Duration Exceeds &nbsp;
          <input type="text" id="trigger_val_rx_silence"/> ms<br/>
          <input type="checkbox" value="silence" id="trigger_enable_tx_silence">TX Silence Duration Exceeds &nbsp;
          <input type="text" id="trigger_val_tx_silence"/> ms<br/>
        </span>
        <br/>
        <span id="more_chopts" style="display:none">
          Chart Refresh Rate:
          <input type="range" min="1" max="30" id="chopts_refresh"/> &nbsp;
          Chart Series Length:
          <input type="range" min="100" max="2000" id="chopts_dataLen"/> <br/>
        </span>
        <br/>
      </div>
      <div id="chartContainer" style="height: 300px; width:100%;"></div>
      <button id="help_toggle">Help!</button>
      <div id="help" style="display:none">
        <h3>Impairment Help</h3>
          <p>
 Delay, Delay Variation (Jitter) and Loss are applied to all packets <em>transmitted</em> by the selected interface.

          <p>
          <h4>Delay:</h4> a basic time delay, specified in milliseconds.
          <h5>Example:</h5>42ms
          <p>
          <h4>Delay Variation (Jitter):</h4> a modifier applied to the basic delay. Each packet is delayed by an additional random length of time in the range: plus-minus Delay Variation.
          <p> Note 1: The actual delay for a packet is calculated as the sum of Delay and the random Delay Variation value and can not be negative, so negative values are clamped at zero.
          <p> Note 2: If Delay Variation is non-zero, the Delay parameter has to be non-zero as well.
          <h5>Example:</h5>22ms
          <p>
          <h4>Loss:</h4> a percentage of random packet loss. Each packet has X percent chance of being dropped.
          <h5>Example:</h5>7%
    </div>
  </body>
</html>

