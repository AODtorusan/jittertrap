<link href="/bower_components/polymer/polymer.html" rel="import">

<polymer-element name="ascii-doc" attributes="src">
  <template>
    <style>
     #doc {
       background: white;
       margin-top: -32px;
       padding-top: 32px;
       padding-left: 24px;
       padding-right: 24px;

       font-size: 16px;
       font-family: "RobotoDraft",Helvetica,Arial,sans-serif;
       font-weight: 300;
       line-height: 24px;
     }
     h2 {
       color: #E91E63;
       font-weight: 300;
       letter-spacing: -0.01em;
       line-height: 60px;
       font-size: 40px;
     }
     h1 {
       display: none;
     }
     .imageblock {
       margin-left: auto;
       margin-right: auto;
     }
    </style>

    <core-ajax
      id="fetchdoc"
      auto
      url="{{src}}"
      method="GET"
      on-core-response="renderDoc"
      ></core-ajax>

    <div id="doc">
    </div>
  </template>
  <script>
    Polymer({
      ready: function() {
        var ajax = this.$.fetchdoc;
        ajax.addEventListener("core-response", function(e) {
          var options = Opal.hash2(['doctype', 'attributes'], {doctype: 'html', attributes: ['showtitle']});
          var html = Opal.Asciidoctor.$convert(e.detail.response, options);
          this.$.doc.innerHTML = html;
        }.bind(this));
      }
    });
  </script>
</polymer-element>
